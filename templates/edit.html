{% extends "base.html" %}

{% block title %}Todo App - Edit{% endblock %}
{% block additional_styling %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/edit.css') }}">
{% endblock %}
{% block content %}
<div class="container edit-container">
    <h1>Edit Todo</h1>

    <form class="edit-form" action="{{ url_for('routes.edit', todo_id=todo_id) }}" method="POST">
        <input placeholder="Edit Todo" type="text" name="todo" value="{{ todo.task }}" required>

        <div class="term-selection">
            <input type="checkbox" id="edit-term-checkbox" name="has_date_range" {% if todo.date_from or todo.date_to
                %}checked{% endif %} onchange="toggleEditTermInputs()">
            <label for="edit-term-checkbox">Has date range</label>
        </div>

        <div id="edit-term-inputs" class="{% if not (todo.date_from or todo.date_to) %}hidden{% endif %}">
            <label for="edit-date-from">From:</label>
            <input type="datetime-local" id="edit-date-from" name="date_from"
                value="{% if todo.date_from %}{{ todo.date_from.strftime('%Y-%m-%dT%H:%M') }}{% endif %}">

            <label for="edit-date-to">To:</label>
            <input type="datetime-local" id="edit-date-to" name="date_to"
                value="{% if todo.date_to %}{{ todo.date_to.strftime('%Y-%m-%dT%H:%M') }}{% endif %}">
        </div>

        <button type="submit">Update</button>
    </form>

    <a href="{{ url_for('routes.index') }}" class="cancel-link">Cancel</a>
</div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function toggleEditTermInputs() {
        var checkbox = document.getElementById('edit-term-checkbox');
        var termInputs = document.getElementById('edit-term-inputs');
        termInputs.classList.toggle('hidden', !checkbox.checked);
    }
</script>
{% endblock %}
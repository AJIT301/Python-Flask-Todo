{% extends "base.html" %}
{% block title %}Register - Todo App{% endblock %}
{% block additional_styling %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
{% endblock %}

{% block content %}

<div class="container register-container">
    <h2>Register Account</h2>

    <form method="POST" novalidate>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="text" name="username" placeholder="Username" value="{{ request.form.username or '' }}" required
            autocomplete="username">

        <input type="email" name="email" placeholder="Email" value="{{ request.form.email or '' }}" required
            autocomplete="email">

        <input type="password" name="password" placeholder="Password" required autocomplete="new-password">

        <select title="Group" name="group" required>
            <option value="" disabled selected>Choose your group</option>
            {% for group in groups %}
            <option value="{{ group.name }}">{{ group.name }}</option>
            {% endfor %}
        </select>

        <!-- Visual CAPTCHA Section -->
        <div class="visual-captcha">
            <p class="captcha-question">{{ visual_captcha.question }}</p>
            <input type="text" name="captcha_answer" placeholder="Your answer" required autocomplete="off">
            <input type="hidden" name="captcha_id" value="{{ visual_captcha.id }}">
        </div>

        <button type="submit">Register</button>
    </form>

    <p>Already have an account?<a href="/login" class="register-link">Sign in</a></p>
</div>
{% endblock %}
{% block additional_scripts %}
<script src="{{ url_for('static', filename='utils/group_loader.js') }}"></script>
{% endblock %}
